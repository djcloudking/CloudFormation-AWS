# Using CloudFormation to Deploy a simple S3 bucket

 In this short tutorial, I will be deploying a simple AWS S3 bucket using a CloudFormation template. 
 
 ### Background
 
 
 
### Prerequisites
 
### Letâ€™s have fun!

#### Step 1: Prepare the CloudFormation Template
 
 - Create a JSON or YAML file 
 
Cheat Sheet: See the attached file S3.template for a cloudformation template

 To follow along, first log into your AWS account. Next get to the CloudFormation servers. I click on create stack. Here it gives me three options. I can use a template that is ready or use a sample or create a new template using the designer. Since our template is ready, I will select template is ready. Next, we have to specify where the template is. Since I have the exercise file downloaded, I will click on the choose file. I will browse to the 0303 folder. Click begin and select the template file. I click next. It asks me for a stack name. This is the unique name given to every CloudFormation stack. I'm going to use the simple name demo and click next. Now it gives us some additional options. First is the ability to specify some tags. These tags are not only attached to the stack but all the resources that get created in the stack. Just to demonstrate this, I will create a stack with a tag purpose and value demo. There are some other advanced features that are rarely used, so I will not use them in this demo. You can also have them as default. When we click next, we get to review everything. Notice your template which is a local file has been uploaded to S3. The description has actually been loaded from the stack itself. You can also review what the stack is going to cost you, if you like. There are other options specified or left as default. We click on create stack. When we click create, it brings us back to the CloudFormation console. Since the demo stack is selected, we can review its details. For example, let's look at the stack info. Here you can find the unique stack ID that is assigned to every CloudFormation stack. We can even review the template itself that was used to create the stack. We can also review the events that took place in creation of the stack, which here you can see include the creation of an S3 bucket. Not just the events, we can also review what resources were created, and most importantly, the outputs of the stack. Now the demo stack creation has been completed, let's go under the S3 service and confirm that a new S3 bucket has been created. You can see that a new bucket now exists with the name demo S3 bucket. This confirms that our stack was created successfully.


 Find and fix a bug
Selecting transcript lines in this section will navigate to timestamp in the video
- [Instructor] Remember that our original goal was to have a website. Let's try to achieve that. I'm at the CloudFormation service console. I will open the stack named demo, go into output and try to open the website URL in a new tab. Notice that I got a 404 error. If you review the error message, it is trying to find the file index.html but unable to find it. Why is it looking for that file? Let's go back to the console and review the template. It is looking for that file because we specified index.html as the index document. We have not uploaded the index.html or the error.html file. So let us do that. We will go into the S3 servers. Go to our bucket. Click upload. Select our files by browsing to them. And hit open. Click next. Just leave everything as default. And both the files have been uploaded. Now we can go back to the website tab and hit refresh. The 404 error has now been replaced by a 403 error. We know that is is related to permissions and what we are missing is a bucket policy. Let's upload a new template which specifies the bucket policy. Go back to the CloudFormation console. Click on demo. Update, we will replace the current template with a new template that we will be uploading. So click choose file, choose the new template and click next. Just leave everything else default. At the review console, you can see that is showing that there is one change being made. That is a new bucket policy, my bucket policy, is being added. We will click update stack. While the stack is being updated, let us review the new template. In addition to having the S3 bucket resource, we now have a new resource called my bucket policy. This is a S3 bucket policy which attaches itself to the bucket with the logical name S3 bucket. And the policy effectively specifies that any file in this S3 bucket can be read by any user, thus making it a public website. Notice how the update is now complete. If we go to the website tab and hit refresh, we now have a static website. You can continue to add files to turn it into a complete website.